---
title: "yarn npm audit"
description: "perform a vulnerability audit against the installed packages"
slug: "cli/audit"
category: "cli"
---

import { Code } from "@astrojs/starlight/components";

<div className="subtitle">
perform a vulnerability audit against the installed packages

</div>

## Usage
<Code code="yarn npm audit" lang="bash" />

## Examples
<p>Checks for known security issues with the installed packages. The output is a list of known issues.
:</p>
<Code code="yarn npm audit" lang="bash" />

<p>Audit dependencies in all workspaces
:</p>
<Code code="yarn npm audit --all" lang="bash" />

<p>Limit auditing to `dependencies` (excludes `devDependencies`)
:</p>
<Code code="yarn npm audit --environment production" lang="bash" />

<p>Show audit report as valid JSON
:</p>
<Code code="yarn npm audit --json" lang="bash" />

<p>Audit all direct and transitive dependencies
:</p>
<Code code="yarn npm audit --recursive" lang="bash" />

<p>Output moderate (or more severe) vulnerabilities
:</p>
<Code code="yarn npm audit --severity moderate" lang="bash" />

<p>Exclude certain packages
:</p>
<Code code="yarn npm audit --exclude package1 --exclude package2" lang="bash" />

<p>Ignore specific advisories
:</p>
<Code code="yarn npm audit --ignore 1234567 --ignore 7654321" lang="bash" />

## Details
This command checks for known security reports on the packages you use. The 
reports are by default extracted from the npm registry, and may or may not be 
relevant to your actual program (not all vulnerabilities affect all code paths).

For consistency with our other commands the default is to only check the direct 
dependencies for the active workspace. To extend this search to all workspaces, 
use `-A,--all`. To extend this search to both direct and transitive 
dependencies, use `-R,--recursive`.

Applying the `--severity` flag will limit the audit table to vulnerabilities of 
the corresponding severity and above. Valid values are `info`, `low`, 
`moderate`, `high`, `critical`.

If the `--json` flag is set, Yarn will print the output exactly as received from 
the registry. Regardless of this flag, the process will exit with a non-zero 
exit code if a report is found for the selected packages.

If certain packages produce false positives for a particular environment, the 
`--exclude` flag can be used to exclude any number of packages from the audit. 
This can also be set in the configuration file with the 
`npmAuditExcludePackages` option.

If particular advisories are needed to be ignored, the `--ignore` flag can be 
used with Advisory ID's to ignore any number of advisories in the audit report. 
This can also be set in the configuration file with the 
`npmAuditIgnoreAdvisories` option.

To understand the dependency tree requiring vulnerable packages, check the raw 
report with the `--json` flag or use `yarn why package` to get more information 
as to who depends on them.

## Options
| Definition | Description |
| ---------- | ----------- |
| <h4 id="options-A%2C-all" className="header-code"><code className="language-text">-A,--all</code></h4> | Audit dependencies from all workspaces |
| <h4 id="options-R%2C-recursive" className="header-code"><code className="language-text">-R,--recursive</code></h4> | Audit transitive dependencies as well |
| <h4 id="options-environment%20%230" className="header-code"><code className="language-text">--environment #0</code></h4> | Which environments to cover |
| <h4 id="options-json" className="header-code"><code className="language-text">--json</code></h4> | Format the output as an NDJSON stream |
| <h4 id="options-no-deprecations" className="header-code"><code className="language-text">--no-deprecations</code></h4> | Don't warn about deprecated packages |
| <h4 id="options-severity%20%230" className="header-code"><code className="language-text">--severity #0</code></h4> | Minimal severity requested for packages to be displayed |
| <h4 id="options-exclude%20%230" className="header-code"><code className="language-text">--exclude #0</code></h4> | Array of glob patterns of packages to exclude from audit |
| <h4 id="options-ignore%20%230" className="header-code"><code className="language-text">--ignore #0</code></h4> | Array of glob patterns of advisory ID's to ignore in the audit report |