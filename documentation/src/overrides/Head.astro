---
import { ClientRouter } from "astro:transitions";
import socialMediaImage from "@/assets/image/social-media-background.png";

const { head } = Astro.locals.starlightRoute;
const { entry } = Astro.locals.starlightRoute;

const siteUrl = Astro.site?.origin ?? "https://yarnpkg.com";
const currentUrl = new URL(Astro.url.pathname, siteUrl).href;
const imageUrl = new URL(socialMediaImage.src, siteUrl).href;

const title = entry?.data?.title
  ? `${entry.data.title} | Yarn`
  : "Yarn - Package Manager";
const description = entry?.data?.description
  ?? "Yarn is a modern JavaScript package manager focused on speed, security, and reliability.";
---

{
  head.map(({ tag: Tag, attrs, content }) => (
    <Tag {...attrs} set:html={content} />
  ))
}

<!-- Open Graph Meta Tags -->
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Yarn" />
<meta property="og:title" content={title} />
<meta property="og:description" content={description} />
<meta property="og:url" content={currentUrl} />
<meta property="og:image" content={imageUrl} />
<meta property="og:image:width" content={String(socialMediaImage.width)} />
<meta property="og:image:height" content={String(socialMediaImage.height)} />
<meta property="og:image:type" content="image/png" />

<!-- Twitter Card Meta Tags -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content={title} />
<meta name="twitter:description" content={description} />
<meta name="twitter:image" content={imageUrl} />

<ClientRouter />
