{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "Settings",
  "propertyAliases": {
    "enableAutoTypes": ["tsEnableAutoTypes"]
  },
  "properties": {
    "changesetBaseRefs": {
      "type": "array",
      "description": "The list of git refs to use as base for changeset detection. Defaults to ['main', 'master'] if not set.",
      "items": {
        "type": "string"
      },
      "default": ["main", "master"]
    },
    "compressionLevel": {
      "type": ["zpm_formats::CompressionAlgorithm", "null"],
      "description": "The compression level to use for the packed file"
    },
    "defaultSemverRangePrefix": {
      "type": "zpm_semver::RangeKind",
      "description": "The default semver range prefix to use for dependencies",
      "default": "caret"
    },
    "enableAutoTypes": {
      "type": "boolean",
      "description": "Whether to automatically add @types/ packages to the dependencies",
      "default": "crate::check_tsconfig(context)"
    },
    "enableConstraintsChecks": {
      "type": "boolean",
      "description": "Whether to check constraints when performing explicit installs",
      "default": false
    },
    "enableGlobalCache": {
      "type": "boolean",
      "description": "Whether to keep the packages in a global cache rather than inside the project",
      "default": true
    },
    "enableLocalCacheCleanup": {
      "type": "boolean",
      "description": "Whether to remove unused packages from the local cache after each install",
      "default": true
    },
    "enableImmutableCache": {
      "type": "boolean",
      "description": "Whether to report errors when a package would be added or removed from the cache",
      "default": false
    },
    "enableImmutableInstalls": {
      "type": "boolean",
      "description": "Whether to report errors when a package would be added or removed from the cache",
      "default": false
    },
    "enableMigrationMode": {
      "type": "boolean",
      "description": "Change various settings in Yarn to make it easier to use. This setting is NOT meant to be manually set; Yarn Switch will automatically apply it when necessary. See [Migration Mode](/getting-started/migration-mode) for details.",
      "default": false
    },
    "enableNetwork": {
      "type": "boolean",
      "description": "Whether to allow Yarn to perform network queries or not",
      "default": true
    },
    "enableProgressBars": {
      "type": "boolean",
      "description": "Whether to show progress bars in the output",
      "default": "zpm_utils::is_terminal()"
    },
    "enableScripts": {
      "type": "boolean",
      "description": "Whether to run postinstall scripts",
      "default": true
    },
    "enableTimers": {
      "type": "boolean",
      "description": "Whether to show timers in the output",
      "default": true
    },
    "enableTransparentWorkspaces": {
      "type": "boolean",
      "description": "Whether to allow workspaces to depend on other workspaces through classic semver ranges",
      "default": true
    },
    "enforceUnsafeHttp": {
      "type": "boolean",
      "description": "Whether to enforce using unsafe HTTP requests over HTTPS",
      "default": false
    },
    "globalFolder": {
      "type": "zpm_utils::Path",
      "description": "The folder where the global cache will be stored",
      "default": "Path::home_dir().unwrap().unwrap().with_join_str(\".yarn/zpm\")"
    },
    "httpRetry": {
      "type": "usize",
      "description": "The number of times to retry a network request",
      "default": 3
    },
    "localCacheFolderName": {
      "type": "string",
      "description": "The name of the folder where the local cache will be stored inside the .yarn folder",
      "default": "cache"
    },
    "networkConcurrency": {
      "type": "usize",
      "description": "The number of concurrent network requests Yarn can perform",
      "default": 100
    },
    "networkSettings": {
      "type": "object",
      "description": "Configuration specific to each network setting",
      "additionalKeys": {
        "type": "zpm_utils::Glob"
      },
      "additionalProperties": {
        "type": "object",
        "title": "NetworkSettings",
        "properties": {
          "enableNetwork": {
            "type": ["boolean", "null"],
            "description": "Whether to allow network access for this specific glob"
          }
        }
      }
    },
    "nodeDistUrl": {
      "type": "string",
      "description": "The URL to use for downloading Node.js distributions",
      "default": "https://nodejs.org/dist"
    },
    "nodeLinker": {
      "type": "crate::NodeLinker",
      "description": "The linker to use for node_modules",
      "default": "pnp"
    },
    "npmAlwaysAuth": {
      "type": "boolean",
      "description": "Whether to always send authentication headers when querying the npm registry",
      "default": false
    },
    "npmMinimalAgeGate": {
      "type": ["std::time::Duration", "null"],
      "description": "Minimum age of a package version in minutes to be considered for installation. Can be used to prevent installing very new packages, either because they tend to be more likely to include accidental bugs, or because of supply-chain security concerns."
    },
    "npmPreapprovedPackages": {
      "type": "array",
      "description": "List of package descriptors (package@range) that bypass the minimum age check. Use this for packages that you trust or that need to be installed immediately.",
      "items": {
        "type": "zpm_primitives::FilterDescriptor"
      }
    },
    "npmAuthIdent": {
      "type": ["string", "null"],
      "description": "The username to use for authentication when querying the npm registry"
    },
    "npmAuthToken": {
      "type": ["zpm_utils::Secret<String>", "null"],
      "description": "The token to use for authentication when querying the npm registry"
    },
    "npmPublishProvenance": {
      "type": "boolean",
      "description": "Whether to generate and publish provenance information when publishing packages",
      "default": false
    },
    "npmPublishRegistry": {
      "type": ["string", "null"],
      "description": "The URL of the npm registry server to use for publishing"
    },
    "npmRegistries": {
      "type": "object",
      "description": "Configuration specific to each npm registry",
      "additionalProperties": {
        "type": "object",
        "title": "NpmRegistry",
        "properties": {
          "npmAlwaysAuth": {
            "type": ["boolean", "null"],
            "description": "Whether to always send authentication headers when querying the npm registry"
          },
          "npmAuthIdent": {
            "type": ["string", "null"],
            "description": "The username to use for authentication when querying the npm registry"
          },
          "npmAuthToken": {
            "type": ["zpm_utils::Secret<String>", "null"],
            "description": "The token to use for authentication when querying the npm registry"
          }
        }
      }
    },
    "npmRegistryServer": {
      "type": "string",
      "description": "The URL of the default npm registry server",
      "default": "https://registry.npmjs.org"
    },
    "npmScopes": {
      "type": "object",
      "description": "Configuration specific to each npm scope",
      "additionalProperties": {
        "type": "object",
        "title": "NpmScope",
        "properties": {
          "npmRegistryServer": {
            "type": ["string", "null"],
            "description": "The URL of the npm registry server to use for this scope"
          },
          "npmPublishRegistry": {
            "type": ["string", "null"],
            "description": "The URL of the npm registry server to use for this scope when publishing packages"
          },
          "npmAlwaysAuth": {
            "type": ["boolean", "null"],
            "description": "Whether to always send authentication headers when querying the npm registry"
          },
          "npmAuthIdent": {
            "type": ["string", "null"],
            "description": "The username to use for authentication when querying the npm registry"
          },
          "npmAuthToken": {
            "type": ["zpm_utils::Secret<String>", "null"],
            "description": "The token to use for authentication when querying the npm registry"
          }
        }
      }
    },
    "packageExtensions": {
      "type": "object",
      "description": "Configuration specific to each package extension",
      "additionalKeys": {
        "type": "zpm_primitives::SemverDescriptor"
      },
      "additionalProperties": {
        "type": "object",
        "title": "PackageExtension",
        "properties": {
          "dependencies": {
            "type": "object",
            "description": "The dependencies to add to the package extension",
            "additionalKeys": {
              "type": "zpm_primitives::Ident"
            },
            "additionalProperties": {
              "type": "zpm_primitives::Range"
            }
          },
          "peerDependencies": {
            "type": "object",
            "description": "The peer dependencies to add to the package extension",
            "additionalKeys": {
              "type": "zpm_primitives::Ident"
            },
            "additionalProperties": {
              "type": "zpm_primitives::PeerRange"
            }
          }
        }
      }
    },
    "pnpEnableInlining": {
      "type": "boolean",
      "description": "Whether to inline the PnP dependency tree in the generated .pnp.cjs file",
      "default": true
    },
    "pnpFallbackMode": {
      "type": "crate::PnpFallbackMode",
      "description": "The fallback mode to use for PnP",
      "default": "dependencies-only"
    },
    "pnpIgnorePatterns": {
      "type": "array",
      "description": "The patterns to ignore when using PnP",
      "items": {
        "type": "zpm_utils::Glob"
      }
    },
    "pnpShebang": {
      "type": "string",
      "description": "The shebang to use for the generated .pnp.cjs file",
      "default": "#!/usr/bin/env node"
    },
    "pnpmHoistPatterns": {
      "type": "array",
      "description": "Patterns specifying which packages should be hoisted to node_modules/.store/node_modules. By default, all packages are hoisted. Use empty array to disable hoisting.",
      "items": {
        "type": "zpm_utils::Glob"
      },
      "default": ["*"]
    },
    "pnpmPublicHoistPatterns": {
      "type": "array",
      "description": "Patterns specifying which packages should be hoisted to the root node_modules directory. Unlike pnpmHoistPatterns which hoists to the hidden modules directory inside the virtual store, this hoists to the public root modules directory.",
      "items": {
        "type": "zpm_utils::Glob"
      }
    },
    "pnpmStoreFolder": {
      "type": "string",
      "description": "The folder to use for the Pnpm store",
      "default": "node_modules/.store"
    },
    "preferDeferredVersions": {
      "type": "boolean",
      "description": "Whether to use deferred versioning by default when running the `yarn version` family of commands",
      "default": false
    },
    "preferReuse": {
      "type": "boolean",
      "description": "Whether to prefer reusing dependencies from the lockfile when running `yarn add`",
      "default": false
    },
    "slowNetworkTimeout": {
      "type": "u64",
      "description": "The timeout in milliseconds to wait for a network request to complete before considering it slow",
      "default": 5000
    },
    "supportedArchitectures": {
      "type": "object",
      "title": "SupportedArchitectures",
      "description": "The list of architectures we need to download in the cache.",
      "properties": {
        "cpu": {
          "type": "array",
          "description": "List of CPU architectures to cover.",
          "items": {
            "type": "zpm_utils::Cpu"
          }
        },
        "libc": {
          "type": "array",
          "description": "The list of standard C libraries to cover.",
          "items": {
            "type": "zpm_utils::Libc"
          }
        },
        "os": {
          "type": "array",
          "description": "The list of operating systems to cover.",
          "items": {
            "type": "zpm_utils::Os"
          }
        }
      }
    },
    "unsafeHttpWhitelist": {
      "type": "array",
      "description": "The patterns to whitelist when using unsafe HTTP",
      "items": {
        "type": "zpm_utils::Glob"
      }
    },
    "virtualFolder": {
      "type": "zpm_utils::Path",
      "description": "The folder to use for the virtual folder",
      "default": ".yarn/__virtual__"
    },
    "workspaceProfiles": {
      "type": "object",
      "description": "Configuration specific to each workspace profile",
      "additionalProperties": {
        "type": "object",
        "title": "WorkspaceProfile",
        "properties": {
          "extends": {
            "type": "array",
            "description": "The extends to add to the workspace profile",
            "items": {
              "type": "string"
            }
          },
          "devDependencies": {
            "type": "object",
            "description": "The dev dependencies to add to the workspace profile",
            "additionalKeys": {
              "type": "zpm_primitives::Ident"
            },
            "additionalProperties": {
              "type": "zpm_primitives::Range"
            }
          }
        }
      }
    },
    "catalog": {
      "type": "object",
      "description": "Default catalog containing package name to version range mappings. This is an alias for catalogs.default.",
      "additionalKeys": {
        "type": "zpm_primitives::Ident"
      },
      "additionalProperties": {
        "type": "zpm_primitives::Range"
      }
    },
    "catalogs": {
      "type": "object",
      "description": "Named catalogs containing predefined version ranges for packages. Use 'catalog:' protocol in dependencies to reference them.",
      "additionalProperties": {
        "type": "object",
        "title": "Catalog",
        "description": "A named catalog containing package name to version range mappings",
        "additionalKeys": {
          "type": "zpm_primitives::Ident"
        },
        "additionalProperties": {
          "type": "zpm_primitives::Range"
        }
      }
    }
  }
}
